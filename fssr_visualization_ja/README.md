{
 "cells": [
  {
   "cell_type": "markdown",
   "id": "c70c9d79-58ee-4a6f-9e30-e332a1f34082",
   "metadata": {
    "execution": {
     "iopub.execute_input": "2025-06-20T00:29:32.917420Z",
     "iopub.status.busy": "2025-06-20T00:29:32.917060Z",
     "iopub.status.idle": "2025-06-20T00:29:32.931629Z",
     "shell.execute_reply": "2025-06-20T00:29:32.930559Z",
     "shell.execute_reply.started": "2025-06-20T00:29:32.917403Z"
    }
   },
   "source": [
    "# カロリーベース食料自給率の可視化\n",
    "\n",
    "---\n",
    "\n",
    "## 1. 概要\n",
    "\n",
    "### 1.1 目的\n",
    "\n",
    "* 日本のカロリーベース食料自給率の構造的な低さを把握し、他地域と比較する\n",
    "* 特に **小麦** に着目し、自給率の推移を把握する\n",
    "\n",
    "### 1.2 対象地域\n",
    "\n",
    "* 世界、日本、欧州、オセアニア、アジア、北アメリカ\n",
    "\n",
    "### 1.3 対象品目（16品目）\n",
    "\n",
    "* 小麦、米、大麦、トウモロコシ、ジャガイモ、大豆、野菜、牛肉、豚肉、卵、牛乳、鶏肉、レンズ豆、砂糖、大豆油、魚類\n",
    "\n",
    "### 1.4 対象期間\n",
    "\n",
    "* 1961年～2013年\n",
    "\n",
    "---\n",
    "\n",
    "## 2. 構成ファイル\n",
    "\n",
    "| ファイル名          | 内容               |\n",
    "| -------------- | ---------------- |\n",
    "| `README.ipynb` | 説明用ノートブック（本ファイル） |\n",
    "| `食料自給率.ipynb`  | 可視化の本体           |\n",
    "| `食料自給率.xlsx`   | 元データ             |\n",
    "| `結果/`          | 出力されたグラフ         |\n",
    "\n",
    "---\n",
    "\n",
    "## 3. 使用データ\n",
    "\n",
    "* 出共1: [FAOSTAT](https://www.fao.org/faostat/)\n",
    "* 出共2: [USDA FoodData Central](https://www.usda.gov/)\n",
    "\n",
    "---\n",
    "\n",
    "## 4. 実行方法\n",
    "\n",
    "1. 必要ライブラリ：\n",
    "\n",
    "   * `numpy`\n",
    "   * `pandas`\n",
    "   * `matplotlib.pyplot`\n",
    "   * `seaborn`\n",
    "   * `random`\n",
    "\n",
    "2. `食料自給率.ipynb` を Jupyter 上で実行\n",
    "\n",
    "3. `食料自給率.xlsx` をノートブックと同じ階層に配置すること\n",
    "\n",
    "---\n",
    "\n",
    "## 5. 結果概要\n",
    "\n",
    "* **日本はカロリーベース食料自給率において、16品目合計でも、小麦単独でも他地域より著しく低い**\n",
    "* 特に小麦では、オセアニア・北米の主要輸出国と比較して **自給率が一桁台で推移**\n",
    "\n",
    "---\n",
    "\n",
    "## 6. 注意事項\n",
    "\n",
    "* 使用した品目は限定的であり、またカロリー係数は USDA を参照しているため、**農林水産省が公表する自給率と異なる可能性がある**\n",
    "* 本データは **国際比較による傾向把握** を目的としており、国内政策評価と一致するとは限らない\n",
    "\n",
    "---\n",
    "\n",
    "## 7. 結果フォルダ構成（出力画像）\n",
    "\n",
    "* `結果/カロリーベースの食料自給率の年次推移.png`\n",
    "* `結果/小麦のカロリーベース食料自給率の年次推移.png`\n",
    "\n",
    "\n",
    "---\n",
    "\n",
    "\n",
    "## 8. 食品カテゴリ対応表（FAOSTAT × USDA）\n",
    "\n",
    "| FAOSTAT品目名                 | 対応するUSDA食品名                                                                      | カロリー係数（kcal/100g） |\n",
    "| -------------------------- | ----------------------------------------------------------------------------------- | ----------------- |\n",
    "| Wheat and products         | Wheat flour, whole-grain, soft wheat                                                | 332               |\n",
    "| Rice (Milled Equivalent)   | Rice, white, long-grain, regular, raw, unenriched                                   | 365               |\n",
    "| Bovine Meat                | Beef, loin, tenderloin steak, boneless, separable lean only, trimmed to 0\" fat, raw | 143               |\n",
    "| Pigmeat                    | Pork, fresh, loin, tenderloin, separable lean only, raw                             | 109               |\n",
    "| Poultry Meat               | Chicken, broiler or fryers, breast, skinless, boneless, meat only, raw              | 120               |\n",
    "| Milk - Excluding Butter    | Milk, whole, 3.25% milkfat, with added vitamin D                                    | 61                |\n",
    "| Eggs                       | Egg, whole, raw, fresh                                                              | 143               |\n",
    "| Soyabean Oil               | Oil, vegetable, soybean, refined                                                    | 884               |\n",
    "| Sugar (Raw Equivalent)     | Sugars, granulated                                                                  | 387               |\n",
    "| Vegetables, other          | Vegetables, mixed, frozen, unprepared                                               | 72                |\n",
    "| Potatoes and products      | Potatoes, flesh and skin, raw                                                       | 77                |\n",
    "| Maize and products         | Cornmeal, degermed, enriched, yellow                                                | 370               |\n",
    "| Barley and products        | Barley, hulled, raw                                                                 | 354               |\n",
    "| Pulses, Other and products | Lentils, raw                                                                        | 352               |\n",
    "| Pelagic Fish               | Fish, salmon, Atlantic, wild, raw                                                   | 142               |\n",
    "| Soybeans                   | Soybeans, mature seeds, raw                                                         | 446               |\n",
    "\n",
    "\n",
    "---\n",
    "\n",
    "\n",
    "## 9. カロリーベース食料自給率の計算方法（FSSR: Food Self-Sufficiency Rate）\n",
    "\n",
    "### 1. 定義\n",
    "\n",
    "カロリーベース食料自給率（FSSR）は、国内で消費される食料のうち、どれだけが**国内生産**で賄われているかを**カロリー換算**で示す指標です。\n",
    "\n",
    "#### 数式（基本形）\n",
    "\n",
    "$$\n",
    "\\text{FSSR (\\%)} = \\left( \\frac{\\text{国内供給カロリー（kcal/capita/day）}}{\\text{総食料供給カロリー（kcal/capita/day）}} \\right) \\times 100\n",
    "$$\n",
    "\n",
    "---\n",
    "\n",
    "### 2. 分子：国内供給カロリー（実質的に食用可能なカロリー量）\n",
    "\n",
    "FAOSTATの `Production` を基に、以下の要素を控除・調整し、**実質的に食用に回ると推定される量**（adjusted production）を計算：\n",
    "\n",
    "```python\n",
    "adjusted_food_1000t = (\n",
    "    Production\n",
    "    - Feed\n",
    "    - Seed\n",
    "    - Losses\n",
    "    - Other Uses (non-food)\n",
    "    - Processed\n",
    "    - Export Quantity\n",
    "    + Stock Variation\n",
    ")\n",
    "```\n",
    "\n",
    "これをカロリー換算して、人口で標準化：\n",
    "\n",
    "$$\n",
    "\\text{分子} = \\frac{\\sum_i (\\text{adjusted\\_food\\_1000t}_i \\times 1,000,000 \\times \\text{kcal/kg}_i)}{\\text{人口} \\times 365}\n",
    "$$\n",
    "\n",
    "* `adjusted_food_1000t_i`: 品目 *i* の実質食用可能量（1000トン）\n",
    "* `kcal/kg_i`: 品目 *i* のカロリー換算係数（USDA基準）\n",
    "* `人口 × 365`: 年間・1人あたり・日単位で換算（kcal/capita/day）\n",
    "\n",
    "---\n",
    "\n",
    "### 3. 分母：総食料供給カロリー\n",
    "\n",
    "FAOSTATの `Food supply (kcal/capita/day)` をそのまま使用：\n",
    "\n",
    "* 各国・年・地域の `Element == \"Food supply (kcal/capita/day)\"` を抽出し、合計\n",
    "* 複数品目がある場合は品目別値を合計して `kcal_supply` として使用\n",
    "\n",
    "---\n",
    "\n",
    "### 4. カロリー換算係数について\n",
    "\n",
    "USDA FoodData CentralまたはStandard Referenceから取得し、FAOSTATの品目分類に対応づけて使用：\n",
    "\n",
    "* 例）小麦（Wheat and products）：332 kcal/100g = 3,320 kcal/kg\n",
    "* すべての係数一覧は別紙「食品カテゴリ対応表（FAOSTAT × USDA）」参照\n",
    "\n",
    "---\n",
    "\n",
    "### 5. 実装上の注意\n",
    "\n",
    "* すべてのデータは年次ベースで処理し、`Area × Year` ごとに集計\n",
    "\n",
    "---\n",
    "\n",
    "### 6. 備考\n",
    "\n",
    "* 本計算は**国際比較可能性を重視したFBS（Food Balance Sheets）ベースの推計**である\n"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "anaconda-panel-2023.05-py310",
   "language": "python",
   "name": "conda-env-anaconda-panel-2023.05-py310-py"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.11.5"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
