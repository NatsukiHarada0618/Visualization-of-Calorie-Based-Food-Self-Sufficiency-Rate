{
 "cells": [
  {
   "cell_type": "markdown",
   "id": "95ebf69e-9b47-4676-8ddb-c7588f9e9d28",
   "metadata": {},
   "source": [
    "# Visualization of Calorie-Based Food Self-Sufficiency Rate\n",
    "\n",
    "---\n",
    "\n",
    "## 1. Overview\n",
    "\n",
    "### 1.1 Objective\n",
    "\n",
    "* Understand the structural causes of Japan's low calorie-based food self-sufficiency rate and compare it with other regions\n",
    "* Focus specifically on **wheat**, and analyze the historical trend in Japan’s self-sufficiency rate\n",
    "\n",
    "### 1.2 Target Regions\n",
    "\n",
    "* World, Japan, Europe, Oceania, Asia, North America\n",
    "\n",
    "### 1.3 Target Items (16 items)\n",
    "\n",
    "* Wheat, rice, barley, maize, potatoes, soybeans, vegetables, beef, pork, eggs, milk, poultry, lentils, sugar, soybean oil, fish\n",
    "\n",
    "### 1.4 Time Period\n",
    "\n",
    "* 1961–2013\n",
    "\n",
    "---\n",
    "\n",
    "## 2. Project Files\n",
    "\n",
    "| Filename       | Description                      |\n",
    "| -------------- | -------------------------------- |\n",
    "| `README.ipynb` | Explanatory notebook (this file) |\n",
    "| `Self-Sufficiency Rate.ipynb`  | Main visualization notebook      |\n",
    "| `Self-Sufficiency Rate.xlsx`   | Raw dataset                      |\n",
    "| `Output/`          | Folder containing output graphs  |\n",
    "\n",
    "---\n",
    "\n",
    "## 3. Data Sources\n",
    "\n",
    "* Source 1: [FAOSTAT](https://www.fao.org/faostat/)\n",
    "* Source 2: [USDA FoodData Central](https://www.usda.gov/)\n",
    "\n",
    "---\n",
    "\n",
    "## 4. How to Run\n",
    "\n",
    "1. Required Python libraries:\n",
    "\n",
    "   * `numpy`\n",
    "   * `pandas`\n",
    "   * `matplotlib.pyplot`\n",
    "   * `seaborn`\n",
    "   * `random`\n",
    "\n",
    "2. Run `Self-Sufficiency Rate.ipynb` in Jupyter Notebook\n",
    "\n",
    "3. Place `Self-Sufficiency Rate.xlsx` in the same directory as the notebook\n",
    "\n",
    "---\n",
    "\n",
    "## 5. Key Findings\n",
    "\n",
    "* **Japan's calorie-based food self-sufficiency rate is significantly lower than that of other regions**, both in total (16 items) and for wheat alone\n",
    "* Particularly for wheat, **Japan’s self-sufficiency remains in the single digits**, in stark contrast to major exporting countries in Oceania and North America\n",
    "\n",
    "---\n",
    "\n",
    "## 6. Notes\n",
    "\n",
    "* The items analyzed are limited, and calorie conversion coefficients are based on USDA data. Therefore, the results **may differ from those published by Japan’s Ministry of Agriculture, Forestry and Fisheries (MAFF)**\n",
    "* This project is intended for **international comparison and trend analysis**, not direct policy evaluation\n",
    "\n",
    "---\n",
    "\n",
    "## 7. Output Folder Structure (Graph Images)\n",
    "\n",
    "* `Calorie_Based_Food_Self_Sufficiency_Rate_Trend.png`\n",
    "* `Wheat_Calorie_Based_Self_Sufficiency_Trend.png`\n",
    "\n",
    "---\n",
    "\n",
    "## 8. Food Category Mapping Table (FAOSTAT × USDA)\n",
    "\n",
    "| FAOSTAT Item Name          | Corresponding USDA Food Name                                              | Calorie Coefficient (kcal/100g) |\n",
    "| -------------------------- | ------------------------------------------------------------------------- | ------------------------------- |\n",
    "| Wheat and products         | Wheat flour, whole-grain, soft wheat                                      | 332                             |\n",
    "| Rice (Milled Equivalent)   | Rice, white, long-grain, regular, raw, unenriched                         | 365                             |\n",
    "| Bovine Meat                | Beef, loin, tenderloin steak, boneless, lean only, trimmed to 0\" fat, raw | 143                             |\n",
    "| Pigmeat                    | Pork, fresh, loin, tenderloin, lean only, raw                             | 109                             |\n",
    "| Poultry Meat               | Chicken, broiler, breast, skinless, boneless, raw                         | 120                             |\n",
    "| Milk - Excluding Butter    | Milk, whole, 3.25% milkfat, with added vitamin D                          | 61                              |\n",
    "| Eggs                       | Egg, whole, raw, fresh                                                    | 143                             |\n",
    "| Soyabean Oil               | Oil, soybean, refined                                                     | 884                             |\n",
    "| Sugar (Raw Equivalent)     | Sugars, granulated                                                        | 387                             |\n",
    "| Vegetables, other          | Vegetables, mixed, frozen, unprepared                                     | 72                              |\n",
    "| Potatoes and products      | Potatoes, flesh and skin, raw                                             | 77                              |\n",
    "| Maize and products         | Cornmeal, degermed, enriched, yellow                                      | 370                             |\n",
    "| Barley and products        | Barley, hulled, raw                                                       | 354                             |\n",
    "| Pulses, Other and products | Lentils, raw                                                              | 352                             |\n",
    "| Pelagic Fish               | Fish, salmon, Atlantic, wild, raw                                         | 142                             |\n",
    "| Soybeans                   | Soybeans, mature seeds, raw                                               | 446                             |\n",
    "\n",
    "\n",
    "---\n",
    "\n",
    "\n",
    "## 9. Method of Calculating Calorie-Based Food Self-Sufficiency Rate (FSSR)\r\n",
    "\r\n",
    "### 1. Definition\r\n",
    "\r\n",
    "The Food Self-Sufficiency Rate (FSSR) is an indicator that shows what percentage of food consumed domestically is covered by **domestic production**, expressed in **calorie terms**.\r\n",
    "\r\n",
    "#### Basic Formula\r\n",
    "\r\n",
    "$$\r\n",
    "\\text{FSSR (\\%)} = \\left( \\frac{\\text{Domestic Calorie Supply (kcal/capita/day)}}{\\text{Total Food Supply (kcal/capita/day)}} \\right) \\times 100\r\n",
    "$$\r\n",
    "\r\n",
    "---\r\n",
    "\r\n",
    "### 2. Numerator: Domestic Calorie Supply (Adjusted for Edible Quantity)\r\n",
    "\r\n",
    "Based on `Production` data from FAOSTAT, the following items are subtracted or adjusted to estimate the **edible portion of food production** (adjusted production):\r\n",
    "\r\n",
    "```python\r\n",
    "adjusted_food_1000t = (\r\n",
    "    Production\r\n",
    "    - Feed\r\n",
    "    - Seed\r\n",
    "    - Losses\r\n",
    "    - Other Uses (non-food)\r\n",
    "    - Processed\r\n",
    "    - Export Quantity\r\n",
    "    + Stock Variation\r\n",
    ")\r\n",
    "```\r\n",
    "\r\n",
    "This is then converted into calories and standardized per capita:\r\n",
    "\r\n",
    "$$\r\n",
    "\\text{Numerator} = \\frac{\\sum_i (\\text{adjusted\\_food\\_1000t}_i \\times 1,000,000 \\times \\text{kcal/kg}_i)}{\\text{Population} \\times 365}\r\n",
    "$$\r\n",
    "\r\n",
    "* `adjusted_food_1000t_i`: Edible portion of item *i* (in 1,000 tons)\r\n",
    "* `kcal/kg_i`: Calorie conversion coefficient for item *i* (based on USDA data)\r\n",
    "* `Population × 365`: Converts to per capita, per day basis (kcal/capita/day)\r\n",
    "\r\n",
    "---\r\n",
    "\r\n",
    "### 3. Denominator: Total Food Supply\r\n",
    "\r\n",
    "Directly use the FAOSTAT item `Food supply (kcal/capita/day)`:\r\n",
    "\r\n",
    "* Extract all rows where `Element == \"Food supply (kcal/capita/day)\"`\r\n",
    "* If multiple items exist, sum across items to get the total `kcal_supply`\r\n",
    "\r\n",
    "---\r\n",
    "\r\n",
    "### 4. Calorie Conversion Coefficients\r\n",
    "\r\n",
    "Calorie coefficients are retrieved from USDA FoodData Central or the USDA Standard Reference and matched with FAOSTAT item categories:\r\n",
    "\r\n",
    "* Example: Wheat (Wheat and products): 332 kcal/100g = 3,320 kcal/kg\r\n",
    "* For the full list, see the separate document \"FAOSTAT × USDA Food Category Mapping Table\"\r\n",
    "\r\n",
    "---\r\n",
    "\r\n",
    "### 5. Implementation Notes\r\n",
    "\r\n",
    "* All data is processed on a yearly basis and aggregated by `Area × Year`\r\n",
    "\r\n",
    "---\r\n",
    "\r\n",
    "### 6. Remarks\r\n",
    "\r\n",
    "* This calculation is based on **Food Balance Sheets (FBS)** with a focus on **international comparability**\r\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "09cd4d15-e78a-497f-bac7-8bf1725df9d6",
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "anaconda-panel-2023.05-py310",
   "language": "python",
   "name": "conda-env-anaconda-panel-2023.05-py310-py"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.11.5"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
